<!-- Шаблон, в который передаются данные страниц при создании финального ХТМЛ-кода сайта  -->

<!doctype html>
<html lang="ru">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Подставляем в название вкладки и описание значения переменных, если они заданы на страницах. Если нет — используем значения по умолчанию -->
    <title>Дай мне ответ</title>
    <meta name="description" content="Дай мне ответ для сердца и разума — ответы на сложные вопросы о Боге">

    <link rel="icon" type="image/png" href="/images/icons/icon.png" />


    <link rel="stylesheet" href="/styles.css">
  </head>

  <body>
    <!-- Подключаем содержимое block content каждой страницы, использующей этот шаблон  -->
    <main>
      
<div class="my__stack XL"></div>
<div class="my__wrapper L">

  <div class="text-width">
    <p>Клиф Кнектли</p>
    <h1>Дай мне ответ<br>для разума и сердца</h1>
    <figure>
      <img src="./assets/cliffe.png" alt="Cliffe">
    </figure>
    <p>Клиф Кнектли — христианский пастор и апологет. Старший пастор «Церкви Благодати» в Нью-Канаане, Коннектикут.</p>
    <p>Клиф уже много лет отвечает на сложные вопросы о Боге и христианстве. В этой книге он собрал сорок
      самых распространённых вопросов, с которыми сталкивается как уличный евангелист.</p>
  </div>

  <div class="my__stack"></div>

  <nav class="nav-container">
    <div class="nav-item accent">
      <a href="/foreword/">
        <h2>Предисловие</h2>
      </a>
    </div>

    <div class="nav-item accent">
      <a href="/intro/">
        <h2>Введение</h2>
      </a>
    </div>

    <div class="nav-item">
      <a href="/chapter1/">
        <p>Глава 1</p>
        <h2>Разве к Богу не много путей?</h2>
      </a>
      <ul>
        <li><a href="/chapter1/#question1">Вопрос 1. Почему Иисус это единственный путь к Богу?</a></li>
        <li><a href="/chapter1/#question2">Вопрос 2. Разве недостаточно просто быть хорошим человеком?</a></li>
        <li><a href="/chapter1/#question3">Вопрос 3. Неужели коротенькая молитва спасет даже очень злого человека?</a>
        </li>
        <li><a href="/chapter1/#question4">Вопрос 4. Важно ли, во что ты веришь, если ты искренен?</a></li>
        <li><a href="/chapter1/#question5">Вопрос 5. Разве на небе не будет скучно?</a></li>
      </ul>
    </div>

    <div class="nav-item">
      <a href="/chapter2/">
        <p>Глава 2</p>
        <h2>Неужели Бог отправляет людей в ад?</h2>
      </a>
      <ul>
        <li><a href="/chapter2/#question6">Вопрос 6. Ад действительно существует?</a></li>
        <li class="disabled">Вопрос 7. Как любящий Бог может отправлять людей в ад?</li>
        <li class="disabled">Вопрос 8. Должен ли я поверить в Иисуса, чтобы не пойти в ад?</li>
        <li class="disabled">Вопрос 9. Пойдут ли в ад те, кто никогда не слышал о Боге?</li>
        <li class="disabled">Вопрос 10. Разве Ветхий завет не говорит о яростном Боге, а Новый говорит о любящем?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 3</p>
      <h2>Почему в мире так много зла?</h2>
      <ul>
        <li>Вопрос 11. Почему страдают невинные люди?</li>
        <li>Вопрос 12. Должен ли Бог нести ответственность за существование зла?</li>
        <li>Вопрос 13. Разве Библейские решения жизненных проблем не устарели?</li>
        <li>Вопрос 14. Почему христиане заинтересованы только в том, чтобы спасать людей?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 4</p>
      <h2>Как ты можешь говорить, что христианство рационально?</h2>
      <ul>
        <li>Вопрос 15. Разве вера в Иисуса не иррациональна?</li>
        <li>Вопрос 16. Как ты можешь доказать, что Бог существует?</li>
        <li>Вопрос 17. Почему я должен верить в Иисуса?</li>
        <li>Вопрос 18. Разве наука не опровергает существование Бога?</li>
        <li>Вопрос 19. Если Иисус правда Бог, почему так много людей отвергают его?</li>
        <li>Вопрос 20. Могут ли у христианина быть сомнения?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 5</p>
      <h2>Почему в церкви так много лицемеров?</h2>
      <ul>
        <li>Вопрос 21. Почему в церкви так много лицемеров?</li>
        <li>Вопрос 22. Почему так много разных конфессий?</li>
        <li>Вопрос 23. Разве Христианство — это не отдушина для слабых людей?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 6</p>
      <h2>Разве Библия не полна мифов?</h2>
      <ul>
        <li>Вопрос 24. Разве Новый завет не полон ошибок?</li>
        <li>Вопрос 25. Почему так много разных интерпретаций Библии?</li>
        <li>Вопрос 26. Почему христиане постоянно цитируют Библию?</li>
        <li>Вопрос 27. Разве воскресение Христа — это не миф?</li>
        <li>Вопрос 28. Когда будет второе пришествие Христа?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 7</p>
      <h2>Что плохого в том, чтобы хорошо проводить время?</h2>
      <ul>
        <li>Вопрос 29. Что плохого в сексе?</li>
        <li>Вопрос 30. Что плохого в сексе по любви?</li>
        <li>Вопрос 31. Что плохого в гомосексуальности?</li>
        <li>Вопрос 32. Что плохого в опьянении?</li>
        <li>Вопрос 33. Что такое грех?</li>
        <li>Вопрос 34. Почему христиане думают, что знают, как другим людям следует жить?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 8</p>
      <h2>Почему я должен верить в Иисуса?</h2>
      <ul>
        <li>Вопрос 35. Зачем Богу любить такого как я?</li>
        <li>Вопрос 36. Разве мир не безнадежен?</li>
        <li>Вопрос 37. Кто настоящий Иисус?</li>
        <li>Вопрос 38. Могу ли прийти к Богу в старости?</li>
        <li>Вопрос 39. Почему мне нужно измениться, если я хочу стать христианином?</li>
        <li>Вопрос 40. У меня всё хорошо, зачем мне Иисус?</li>
        <li>Вопрос 41. Как всё это ко мне относится?</li>
      </ul>
    </div>

    <div class="nav-item disabled">
      <p>Глава 9</p>
      <h2>Как мне рассказать другим об Иисусе?</h2>
      <!-- здесь нет вопросов -->
    </div>

  </nav>
  </section>

  
      <div class="my__stack XXL"></div>

    </main>

    <!-- Подключаем includes/footer.html -->
    <footer class="footer">
  <small><a href="https://t.me/designbazarov">Макс Базаров</a>, 2025</small>
</footer>

    <script src="/script.js"></script>
    <script>
      /**
 * IdsFootnote - Popup container that displays footnote content
 */
      class IdsFootnote extends HTMLElement {
        #wrapper = null;
        #aside = null;
        #closeButton = null;
        #resizeObserver = null;

        connectedCallback() {
          // Create wrapper
          this.#wrapper = document.createElement("div");
          this.#wrapper.className = "ids-footnote-wrap";

          // Move existing content to wrapper for later use
          while (this.firstChild) {
            this.#wrapper.appendChild(this.firstChild);
          }

          this.appendChild(this.#wrapper);

          // Register in store
          FootnoteStore.registerNote(this.#wrapper);

          // Subscribe to store updates
          FootnoteStore.subscribe(this.#update);

          this.#update();
        }

        disconnectedCallback() {
          FootnoteStore.unregisterNote(this.#wrapper);
          FootnoteStore.unsubscribe(this.#update);
          this.#cleanup();
        }

        #update = () => {
          const index = FootnoteStore.getNoteIndex(this.#wrapper);
          const isOpen = FootnoteStore.currentIndex === index;

          if (isOpen && !this.#aside) {
            this.#render(index);
            // Defer position calculation to next frame to ensure layout is complete
            requestAnimationFrame(() => {
              if (this.#aside) {
                this.#updatePosition(index);
                this.#checkScrollability();
              }
            });
          } else if (!isOpen && this.#aside) {
            this.#cleanup();
          } else if (isOpen) {
            // Update position for already rendered footnote
            this.#updatePosition(index);
            this.#checkScrollability();
          }
        };

        #render(index) {
          // Save current scroll position to prevent unwanted scroll
          const scrollX = window.scrollX;
          const scrollY = window.scrollY;

          // Create aside
          this.#aside = document.createElement("aside");
          this.#aside.className = "ids-footnote";
          this.#aside.id = `ids-footnote-${index}`;
          this.#aside.setAttribute("role", "dialog");
          this.#aside.setAttribute(
            "aria-labelledby",
            `ids-footnote-label-${index}`,
          );

          // Move content from wrapper to aside (but keep wrapper's original children)
          const tempContent = [];
          this.#wrapper.childNodes.forEach((node) => {
            if (node !== this.#aside) {
              tempContent.push(node.cloneNode(true));
            }
          });

          tempContent.forEach((node) => this.#aside.appendChild(node));

          // Create close button (hidden by default, shown if scrollable)
          this.#closeButton = this.#createCloseButton();
          this.#aside.appendChild(this.#closeButton);

          this.#wrapper.appendChild(this.#aside);

          // Restore scroll position if it changed
          window.scrollTo(scrollX, scrollY);

          // Add first paragraph badge
          this.#addFirstParagraphBadge(index);

          // Setup event listeners
          this.#setupEventListeners();

          // Setup resize observer for scrollability
          this.#resizeObserver = new ResizeObserver(() =>
            this.#checkScrollability(),
          );
          this.#resizeObserver.observe(this.#aside);
        }

        #cleanup() {
          if (this.#aside) {
            this.#removeEventListeners();
            this.#resizeObserver?.disconnect();
            this.#aside.remove();
            this.#aside = null;
            this.#closeButton = null;
            document.documentElement.style.removeProperty("overflow");
          }
        }

        #updatePosition(index) {
          const linkElement = FootnoteStore.linkRegistry[index];
          if (!linkElement || !this.#wrapper) return;

          // Reset position first to get accurate measurements
          this.#wrapper.style.setProperty("--top", "0px");

          // Force reflow to ensure accurate measurements
          void this.#wrapper.offsetHeight;

          const linkRect = linkElement.getBoundingClientRect();
          const wrapperRect = this.#wrapper.getBoundingClientRect();
          const offsetTop = `${linkRect.top - wrapperRect.top}px`;

          this.#wrapper.style.setProperty("--top", offsetTop);
        }

        #checkScrollability() {
          if (!this.#aside) return;

          this.#aside.classList.toggle(
            "scrollable",
            this.#aside.scrollHeight > this.#aside.clientHeight,
          );

          // Lock body scroll if scrollable
          if (this.isScrollable) {
            document.documentElement.style.overflow = "hidden";
          } else {
            document.documentElement.style.removeProperty("overflow");
          }
        }

        #addFirstParagraphBadge(index) {
          const firstP = this.#aside.querySelector("p:first-child");
          if (firstP) {
            firstP.setAttribute("data-index", getFootnoteSymbol(index));
          }

          // Add enlarge-number class if index >= 10
          if (index >= 10) {
            this.#aside.classList.add("enlarge-number");
          }
        }

        #setupEventListeners() {
          document.addEventListener("click", this.#handleOutsideClick, true);
          document.addEventListener("keyup", this.#handleEscape);
          this.#closeButton.addEventListener("click", this.#handleCloseClick);
        }

        #removeEventListeners() {
          document.removeEventListener("click", this.#handleOutsideClick, true);
          document.removeEventListener("keyup", this.#handleEscape);
          this.#closeButton?.removeEventListener(
            "click",
            this.#handleCloseClick,
          );
        }

        #handleOutsideClick = (e) => {
          const targetNode = e.target;

          // Don't close if clicking inside this footnote
          if (this.#aside.contains(targetNode)) {
            return;
          }

          // Don't close if clicking on any footnote link
          const clickedLink = FootnoteStore.linkRegistry.some((link) =>
            link.contains(targetNode),
          );
          if (clickedLink) {
            return;
          }

          e.preventDefault();
          e.stopPropagation();
          this.close();
        };

        #handleEscape = (e) => {
          if (e.key === "Escape") {
            this.close();
          }
        };

        #handleCloseClick = () => {
          this.close();
        };

        #createCloseButton() {
          const button = document.createElement("button");
          button.className = "ids-footnote__close";

          const svg = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "svg",
          );
          svg.setAttribute("viewBox", "0 0 20 20");

          const line1 = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "line",
          );
          line1.setAttribute("x1", "0");
          line1.setAttribute("y1", "20");
          line1.setAttribute("x2", "20");
          line1.setAttribute("y2", "0");

          const line2 = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "line",
          );
          line2.setAttribute("x1", "0");
          line2.setAttribute("y1", "0");
          line2.setAttribute("x2", "20");
          line2.setAttribute("y2", "20");

          svg.appendChild(line1);
          svg.appendChild(line2);

          const span = document.createElement("span");
          span.textContent = "Закрыть";

          button.appendChild(svg);
          button.appendChild(span);

          return button;
        }

        get index() {
          return FootnoteStore.getNoteIndex(this.#wrapper);
        }

        get isOpen() {
          return FootnoteStore.currentIndex === this.index;
        }

        get isScrollable() {
          if (!this.#aside) return false;
          return this.#aside.scrollHeight > this.#aside.clientHeight;
        }

        get offsetTop() {
          return this.#wrapper?.style.getPropertyValue("--top") || "";
        }

        close() {
          if (this.isOpen) {
            FootnoteStore.currentIndex = null;
            this.dispatchEvent(
              new CustomEvent("ids-footnote-close", {
                detail: { index: this.index },
                bubbles: true,
              }),
            );
          }
        }
      }

      // Register custom elements
      window.customElements.define("ids-footnote-link", IdsFootnoteLink);
      window.customElements.define("ids-footnote", IdsFootnote);
    </script>
  </body>

</html>